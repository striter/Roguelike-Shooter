using UnityEngine.UI;
using UnityEngine;
using System.Collections.Generic;
using System;

namespace UIT_SimpleBehaviours
{
    class UIT_MessageBox:SimpleBehaviour
    {
        protected Transform tf_Container;
        protected Text txt_Title;

        public UIT_MessageBox(Transform _transform):base(_transform)
        {
            transform = _transform;
            tf_Container = transform.Find("Container");
            txt_Title = tf_Container.Find("TxtTitle").GetComponent<Text>();
        }

        protected void StartMessage(string title, bool keepInstance)
        {
            txt_Title.text = title;
            SetShow(true);
        }

       protected void SetShow(bool show)
        {
            tf_Container.SetActivate(show);
        }
    }

    class UIT_SelectAmountBase : SimpleBehaviour
    {
        Action<int> OnAmountSelect;
        int i_Amount,i_MaxAmount,i_MinAmount;
        Button btn_Add, btn_Minus;
        Text txt_Amount;
        public UIT_SelectAmountBase(Transform _transform, Action<int> _OnAmountSelect, int _Min = 0,int _Max=999) : base(_transform)
        {
            i_Amount = 1;
            i_MaxAmount = _Max;
            i_MinAmount = _Min;
            OnAmountSelect = _OnAmountSelect;
            txt_Amount = transform.Find("TxtAmount").GetComponent<Text>();
            btn_Add = transform.Find("BtnAdd").GetComponent<Button>();
            btn_Minus = transform.Find("BtnMinus").GetComponent<Button>();
            btn_Add.onClick.AddListener(OnAddBtnClick);
            btn_Minus.onClick.AddListener(OnMinusBtnClick);
        }
        void OnAddBtnClick()
        {
            if(i_Amount+1<i_MaxAmount)
            SetAmount(i_Amount+1);
        }
        void OnMinusBtnClick()
        {
            if(i_Amount-1>i_MinAmount)
            SetAmount(i_Amount-1);
        }
        void SetAmount(int _amount)
        {
            i_Amount = _amount;
            txt_Amount.text = i_Amount.ToString();
            OnAmountSelect(i_Amount);
        }
        public void ChangeAmount(int _amount)
        {
            SetAmount(_amount);
        }
    }
    

    class UIT_InputFieldButton : SimpleBehaviour
    {
        protected InputField if_field;
        protected Button btn_field;
        public string Text
        {
            get
            {
                return if_field.text;
            }
        }
        public UIT_InputFieldButton(Transform _transform) : base(_transform)
        {
            if_field = transform.GetComponent<InputField>();
            if_field.onValueChanged.AddListener(OnFieldTextChange);
            btn_field = transform.Find("BtnField").GetComponent<Button>();
            btn_field.onClick.AddListener(OnFieldBtnClick);
        }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
        protected virtual void OnFieldBtnClick()
        {
        }
        protected virtual void OnFieldTextChange(string text)
        {
        }
    }
    class UIT_InputFieldClear: UIT_InputFieldButton
    {
        public UIT_InputFieldClear(Transform _transform) : base(_transform)
        {
            btn_field.interactable = if_field.text != "";
        }
        protected override void OnFieldBtnClick()
        {
            base.OnFieldBtnClick();
            if_field.text = "";
        }
        protected override void OnFieldTextChange(string text)
        {
            base.OnFieldTextChange(text);
            btn_field.interactable = if_field.text != "";
        }
    }
    class UIT_InputFieldShowState: UIT_InputFieldButton
    {
        public UIT_InputFieldShowState(Transform _transform):base(_transform)
        {
        }
        protected override void OnFieldBtnClick()
        {
            if_field.contentType = if_field.contentType == InputField.ContentType.Password ?
            InputField.ContentType.Standard : InputField.ContentType.Password;
            if_field.Select();
        }
    }
}